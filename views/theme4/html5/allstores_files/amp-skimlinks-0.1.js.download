(self.AMP=self.AMP||[]).push({n:"amp-skimlinks",v:"2102200206006",m:0,f:(function(AMP,_){
'use strict';var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object");}()}var ca=ba(this);"function"===typeof Symbol&&Symbol("x");var l;
if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var n;a:{var da={a:!0},p={};try{p.__proto__=da;n=p.a;break a}catch(a){}n=!1}l=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ea=l;
function fa(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ea)ea(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Aa=b.prototype};function ha(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function ia(a){var b=!1,c=null,d=a;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];b||(c=d.apply(self,f),b=!0,d=null);return c}};var r=self.AMP_CONFIG||{},ja=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ka(a){if(self.document&&self.document.head&&(!self.location||!ja.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}r.cdnUrl||ka("runtime-host");r.geoApiUrl||ka("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var t=self.__AMP_LOG;function u(){if(t.dev)return t.dev;throw Error("failed to call initLogConstructor");}function la(a,b){if(!t.user)throw Error("failed to call initLogConstructor");t.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function v(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return w(a,b)}function x(a,b){var c=y(a);c=z(c);return w(c,b)}function y(a){return a.nodeType?v((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function z(a){a=y(a);return a.isSingleDoc()?a.win:a}function w(a,b){a=A(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function ma(a,b){var c=na(a,b);if(c)return c;a=A(a);a[b]=oa();return a[b].promise}
function na(a,b){var c=A(a)[b];if(c){if(c.promise)return c.promise;w(a,b);return c.promise=Promise.resolve(c.obj)}return null}function A(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function oa(){var a=new ha,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};var C;function D(){return C?C:C=Promise.resolve(void 0)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var E;function F(a){return a||{}};function pa(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a};function qa(a){var b=na(z(a),"amp-analytics-instrumentation");if(b)return b;var c=y(a);return c.waitForBodyOpen().then(function(){var d=c.win;var e=c.win.document.head;if(e){var f={};e=e.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<e.length;g++){var h=e[g];h=h.getAttribute("custom-element")||h.getAttribute("custom-template");f[h]=!0}f=Object.keys(f)}else f=[];return f.includes("amp-analytics")?v(d,"extensions").waitForExtension(d,"amp-analytics"):D()}).then(function(){var d=
c.win;return d.__AMP_EXTENDED_ELEMENTS&&d.__AMP_EXTENDED_ELEMENTS["amp-analytics"]?ma(z(a),"amp-analytics-instrumentation"):null})};function ra(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;var e=c,f=d;qa(a).then(function(g){g&&g.triggerEventForTarget(a,b,e,f)})};function sa(a,b){var c=this;this.fa=a.getResourceId();this.J=a;this.C=b;for(var d in b.triggers)b.triggers[d].on="sandbox-"+this.fa+"-"+b.triggers[d].on;this.J.signals().whenSignal("load-start").then(function(){var e=c.J,f=e.ownerDocument;var g=pa(f,"amp-analytics",F({sandbox:"true",trigger:(void 0===g?0:g)?"":"immediate"}));f=pa(f,"script",F({type:"application/json"}));f.textContent=JSON.stringify(b);g.appendChild(f);g.CONFIG=b;f=v(e.ownerDocument.defaultView,"extensions");var h=y(e);f.installExtensionForDoc(h,
"amp-analytics");e.appendChild(g)})}sa.prototype.trigger=function(a,b){ra(this.J,"sandbox-"+this.fa+"-"+a,b)};function G(a){this.J=a;this.C={requests:{},triggers:{}}}G.prototype.setTransportConfig=function(a){this.C.transport=a};G.prototype.setExtraUrlParams=function(a){this.C.extraUrlParams=a};G.prototype.track=function(a,b){b=Array.isArray(b)?b:[b];for(var c=[],d=0;d<b.length;d++){var e=a+"-request-"+d;this.C.requests[e]=b[d];c.push(e)}this.C.triggers[a]={on:a,request:c};return this};
G.prototype.build=function(){var a=new sa(this.J,this.C);this.C=null;return a};function H(){this.oa=100;this.T=this.$=0;this.N=Object.create(null)}H.prototype.has=function(a){return!!this.N[a]};H.prototype.get=function(a){var b=this.N[a];if(b)return b.access=++this.T,b.payload};H.prototype.put=function(a,b){this.has(a)||this.$++;this.N[a]={payload:b,access:this.T};if(!(this.$<=this.oa)){u().warn("lru-cache","Trimming LRU cache");a=this.N;var c=this.T+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.$--)}};F({c:!0,v:!0,a:!0,ad:!0});var I,ta;
function ua(a){I||(I=self.document.createElement("a"),ta=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new H));var b=ta,c=I;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a};function J(a){return a?a.hostname.replace(/^www\./,""):""}function K(a,b){var c=b.excludedDomains;return c&&-1!==c.indexOf(a)}function va(a,b){a=J(a);return K(a,b)};var L={pageTrackingUrl:"https://t.skimresources.com/api/track.php?data=${data}",linksTrackingUrl:"https://t.skimresources.com/api/link?data=${data}",nonAffiliateTrackingUrl:"https://t.skimresources.com/api/?call=track&rnd=${rnd}&data=${data}",beaconUrl:"https://r.skimresources.com/api"},wa="facebook.com go.redirectingat.com go.skimresources.com instagram.com twitter.com youtube.com".split(" ");function M(a,b,c){this.P=b.tracking;for(var d=b.customTrackingId,e="",f=0;8>f;f++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.K={customTrackingId:d,guid:null,pageImpressionId:e,pageUrl:"CANONICAL_URL",pubcode:b.pubcode,referrer:c,timezone:"TIMEZONE"};this.h=b;a=new G(a);b=this.h.config;d=b.linksTrackingUrl;e=b.nonAffiliateTrackingUrl;a.track("page-impressions",b.pageTrackingUrl);a.track("link-impressions",d);a.track("non-affiliate-click",e);a.setTransportConfig(F({beacon:!0,
image:!0,xhrpost:!1}));this.U=a.build()}M.prototype.getTrackingInfo=function(){return this.K};M.prototype.setTrackingInfo=function(a){Object.assign(this.K,a)};
M.prototype.sendImpressionTracking=function(a){if(this.P){var b=this.K,c=F({pub:b.pubcode,pag:b.pageUrl,guid:b.guid,uuid:b.pageImpressionId,tz:b.timezone,jv:"amp@1.0.3"});b=Ca(this,a);var d=b.numberAffiliateLinks,e=b.urls;b=this.K;b=Object.assign(F({slc:d,jsl:0,pref:b.referrer,uc:b.customTrackingId,t:1}),c);this.U.trigger("page-impressions",F({data:JSON.stringify(b)}));0!==d&&(b=Object.assign(F({dl:e,hae:d?1:0,typ:"l"}),c),this.U.trigger("link-impressions",F({data:JSON.stringify(b)})))}};
M.prototype.sendNaClickTracking=function(a){if(this.P&&!va(a,this.h)){var b=this.K,c=b.pageImpressionId,d=b.timezone,e=b.customTrackingId;a=F({pubcode:b.pubcode,referrer:b.pageUrl,pref:b.referrer,site:"false",url:a.href,custom:a.getAttribute("data-skimlinks-custom-tracking-id")||e,xtz:d,uuid:c,product:"1",jv:"amp@1.0.3"});this.U.trigger("non-affiliate-click",F({data:JSON.stringify(a),rnd:"RANDOM"}))}};
function Ca(a,b){var c=0,d=F({});b.forEach(function(e){var f=e.replacementUrl,g=e.anchor,h=va(g,a.h);f&&!h&&(d[g.href]=d[g.href]||F({ae:1,count:0}),d[g.href].count+=1,c+=1)});return{numberAffiliateLinks:c,urls:d}};function Da(a,b){this.syncResponse=a;this.asyncResponse=b};function N(a,b,c){this.S=a;this.h=b;this.R=c;this.F=F({});this.firstRequest=null}N.prototype.fetchDomainResolverApi=function(a){var b=F({pubcode:this.h.pubcode,page:"",domains:a}),c=this.h.config.beaconUrl;c=c+"?data="+JSON.stringify(b);return this.S.fetchJson(c,{method:"GET",ampCors:!1,credentials:"include"}).then(function(d){return d.json()})};
N.prototype.resolveUnknownAnchors=function(a){var b=Ea(this,a),c=null,d=Fa(this,a);if(d.length){Ga(this,d);var e=this.W(a,d);c=Ha(this,e,d)}return new Da(b,c)};function Ea(a,b){return b.map(function(c){var d=null;var e=J(c);e=K(e,a.h)?"ignore":a.F[e]||"unknown";if("affiliate"===e||"unknown"===e)d=a.R.getAffiliateUrl(c);return{anchor:c,replacementUrl:d}})}function Fa(a,b){return b.reduce(function(c,d){d=J(d);var e=a.F[d],f=K(d,a.h),g=-1!==c.indexOf(d);e||f||g||c.push(d);return c},[])}
function Ga(a,b){b.forEach(function(c){a.F[c]||(K(c,a.h)&&(a.F[c]="ignore"),a.F[c]="unknown")})}N.prototype.W=function(a,b){return a.filter(function(c){var d=J(c);return-1!==b.indexOf(d)})};function Ha(a,b,c){var d=a.fetchDomainResolverApi(c);a.firstRequest||(a.firstRequest=d);return d.then(function(e){Ia(a,c,e.merchant_domains||[]);return Ea(a,b)})}function Ia(a,b,c){b.forEach(function(d){var e=-1!==c.indexOf(d);a.F[d]=e?"affiliate":"non-affiliate"})};var O,Ja="Webkit webkit Moz moz ms O o".split(" ");var Ka=!1;function Q(){this.l=[]}Q.prototype.peek=function(){var a=this.l.length;return a?this.l[a-1].item:null};Q.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=-1,d=0,e=this.l.length;d<=e;){c=Math.floor((d+e)/2);if(c===this.l.length)break;if(this.l[c].priority<b)d=c+1;else if(0<c&&this.l[c-1].priority>=b)e=c-1;else break}this.l.splice(c,0,{item:a,priority:b})};Q.prototype.forEach=function(a){for(var b=this.l.length;b--;)a(this.l[b].item)};
Q.prototype.dequeue=function(){return this.l.length?this.l.pop().item:null};ca.Object.defineProperties(Q.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.l.length}}});var La=/nochunking=1/.test(self.location.hash),R=D();function Ma(a,b){if(La)R.then(b);else{var c=S,d=y(a),e=z(d),f=A(e),g=f.chunk;g||(g=f.chunk={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,adopted:!1});g.ctor||g.obj||(g.ctor=c,g.context=d,g.adopted=!1,g.resolve&&w(e,"chunk"));x(a,"chunk").run(b,10)}}function T(a){this.state="not_run";this.V=a}function Na(a,b){if("run"!=a.state){a.state="run";try{a.V(b)}catch(c){throw a.ia(),c;}}}T.prototype.ia=function(){};
T.prototype.ga=function(){return!1};T.prototype.ka=function(){return!1};function U(a,b,c){T.call(this,a);this.ba=c}fa(U,T);
U.prototype.ia=function(){var a=self.document;if(!Ka){Ka=!0;a=a.body;var b={opacity:1,visibility:"visible",animation:"none"},c;for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(g.startsWith("--"))f=g;else{O||(O=Object.create(null));var h=O[g];if(!h){h=g;if(void 0===f[g]){var m=g;m=m.charAt(0).toUpperCase()+m.slice(1);b:{for(var q=0;q<Ja.length;q++){var B=Ja[q]+m;if(void 0!==f[B]){m=B;break b}}m=""}void 0!==f[m]&&(h=m)}O[g]=h}f=h}f&&(f.startsWith("--")?d.style.setProperty(f,e):d.style[f]=e)}}};
U.prototype.ga=function(){return this.ba.ampdoc.isVisible()};U.prototype.ka=function(){return this.ba.ca};
function S(a){var b=this;this.ampdoc=a;this.o=a.win;this.H=new Q;this.aa=this.ea.bind(this);this.G=0;this.ya=!(!this.o.navigator.scheduling||!this.o.navigator.scheduling.isInputPending);this.O=!1;this.ma=this.o.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.o.addEventListener("message",function(c){"amp-macro-task"==c.data&&b.ea(null)});this.ca=!1;ma(z(a),"viewer").then(function(){b.ca=!0});a.onVisibilityChanged(function(){a.isVisible()&&V(b)})}
S.prototype.run=function(a,b){var c=new T(a);this.H.enqueue(c,b);V(this)};S.prototype.runForStartup=function(a){a=new U(a,this.o,this);this.H.enqueue(a,Number.POSITIVE_INFINITY);V(this)};function Oa(a,b){for(var c=a.H.peek();c&&"not_run"!==c.state;)a.H.dequeue(),c=a.H.peek();c&&b&&a.H.dequeue();return c}
S.prototype.ea=function(a){var b=this,c=Oa(this,!0);if(!c)return this.O=!1,this.G=0,!1;try{var d=Date.now();Na(c,a)}finally{R.then().then().then().then().then().then().then().then().then(function(){b.O=!1;b.G+=Date.now()-d;u().fine("CHUNK",c.V.displayName||c.V.name,"Chunk duration",Date.now()-d,b.G);V(b)})}return!0};function Pa(a){a.ma&&(a.ya?a.o.navigator.scheduling.isInputPending():5<a.G)?(a.G=0,Qa(a)):R.then(function(){a.aa(null)})}
function V(a){if(!a.O){var b=Oa(a);b&&(b.ga()?(a.O=!0,Pa(a)):b.ka()&&a.o.requestIdleCallback?Ra(a.o,a.aa):Qa(a))}}function Qa(a){a.o.postMessage("amp-macro-task","*")}
function Ra(a,b){function c(e){if(15>e.timeRemaining()){var f=2E3-(Date.now()-d);0>=f||e.didTimeout?(u().fine("CHUNK","Timed out",2E3,e.didTimeout),b(e)):(u().fine("CHUNK","Rescheduling with",f,e.timeRemaining()),a.requestIdleCallback(c,{timeout:f}))}else u().fine("CHUNK","Running idle callback with ",15),b(e)}var d=Date.now();a.requestIdleCallback(c,{timeout:2E3})};function Sa(){this.I=[];this.Z=[]}k=Sa.prototype;k.updateLinkList=function(a){this.Z=a.map(this.getReplacementUrlForAnchor.bind(this));this.I=a};k.updateReplacementUrls=function(a){var b=this;a.forEach(function(c){var d=c.replacementUrl,e=b.I.indexOf(c.anchor);-1!==e&&(b.Z[e]=d)})};k.getReplacementUrlForAnchor=function(a){a=this.I.indexOf(a);return-1!==a?this.Z[a]:null};k.isInCache=function(a){return-1!==this.I.indexOf(a)};
k.getAnchorReplacementList=function(){var a=this;return this.I.map(function(b){return{anchor:b,replacementUrl:a.getReplacementUrlForAnchor(b)}})};function Ta(){this.j=null}k=Ta.prototype;k.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};k.remove=function(a){this.j&&(a=this.j.indexOf(a),-1<a&&this.j.splice(a,1))};k.removeAll=function(){this.j&&(this.j.length=0)};k.fire=function(a){if(this.j)for(var b=this.j,c=0;c<b.length;c++)(0,b[c])(a)};k.getHandlerCount=function(){return this.j?this.j.length:0};function Ua(a,b,c,d){this.events=new Ta;this.id=b;this.D=a;this.va=c;this.qa=d.linkSelector||"a";this.wa=300;this.B=new Sa}k=Ua.prototype;k.getReplacementUrl=function(a){return this.isWatchingLink(a)?this.B.getReplacementUrlForAnchor(a):null};k.getAnchorReplacementList=function(){return this.B.getAnchorReplacementList()};k.isWatchingLink=function(a){return this.B.isInCache(a)};
k.rewriteAnchorUrl=function(a){var b=this.getReplacementUrl(a);if(!b||b===a.href)return!1;a.setAttribute("data-link-rewriter-original-url",a.href);a.href=b;setTimeout(function(){a.href=a.getAttribute("data-link-rewriter-original-url");a.removeAttribute("data-link-rewriter-original-url")},this.wa);return!0};
k.onDomUpdated=function(){var a=this;return new Promise(function(b){Ma(a.D.nodeType==Node.DOCUMENT_NODE?a.D.documentElement:a.D,function(){return Va(a).then(function(){a.events.fire({type:"PAGE_SCANNED"});b()})})})};
function Va(a){var b=Wa(a),c=a.W(b);a.B.updateLinkList(b);if(!c.length)return D();a.B.updateReplacementUrls(c.map(function(e){return{anchor:e,replacementUrl:null}}));var d=a.va(c);la(d instanceof Da,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse');d.syncResponse&&a.B.updateReplacementUrls(d.syncResponse);return d.asyncResponse?d.asyncResponse.then(function(e){a.B.updateReplacementUrls(e)}):D()}
k.W=function(a){var b=this,c=[];a.forEach(function(d){b.isWatchingLink(d)||c.push(d)});return c};function Wa(a){var b=a.D.querySelectorAll(a.qa);return[].slice.call(b)};function W(a){this.D=a.getRootNode();var b=a.getMetaByName("amp-link-rewriter-priorities");this.ua=b?b.trim().split(/\s+/):[];this.X=[];this.D.addEventListener("amp:dom-update",this.sa.bind(this));x(a,"navigation").registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}W.prototype.registerLinkRewriter=function(a,b,c){var d=new Ua(this.D,a,b,c);Xa(this.X,d,this.ua);d.onDomUpdated();return d};
W.prototype.maybeRewriteLink=function(a,b){var c=Ya(this,a);if(c.length){for(var d=null,e=0;e<c.length;e++)if(c[e].rewriteAnchorUrl(a)){d=c[e];break}var f={linkRewriterId:d?d.id:null,anchor:a,clickType:b.type};c.forEach(function(g){g.events.fire({type:"CLICK",eventData:f})})}};W.prototype.sa=function(){this.X.forEach(function(a){a.onDomUpdated()})};function Za(a){var b=a.hasAttribute("data-link-rewriters")?a.getAttribute("data-link-rewriters").trim():null;return b?b.split(/\s+/):[]}
function Xa(a,b,c){a.push(b);a.sort(function(d,e){var f=c.indexOf(d.id),g=c.indexOf(e.id);return-1===f&&-1===g?0:-1===f?1:-1===g?-1:f>g?1:-1})}function Ya(a,b){var c=Za(b);return a.X.reduce(function(d,e){e.isWatchingLink(b)&&Xa(d,e,c);return d},[])};function $a(a,b,c,d){this.P=c;this.pa=d;this.na=x(a,"documentInfo").get().canonicalUrl;this.za=""+(new Date).getTimezoneOffset();this.h=b}
$a.prototype.getAffiliateUrl=function(a){if(!a)return null;var b=this.P.getTrackingInfo(),c=b.pubcode,d=b.pageImpressionId,e=b.customTrackingId;b=b.guid;var f=a.getAttribute("data-skimlinks-custom-tracking-id")||e,g=F({id:c,url:a.href,sref:this.na,pref:this.pa,xguid:b,xuuid:d,xtz:this.za,xs:"1",jv:"amp@1.0.3"});f&&(g.xcust=f);a=this.h.waypointBaseUrl;c=[];for(h in g)if(d=g[h],null!=d)if(Array.isArray(d))for(e=0;e<d.length;e++)b=d[e],c.push(encodeURIComponent(h)+"="+encodeURIComponent(b));else c.push(encodeURIComponent(h)+
"="+encodeURIComponent(d));var h=c.join("&");h?(a=a.split("#",2),c=a[0].split("?",2),h=c[0]+(c[1]?"?"+c[1]+"&"+h:"?"+h),h+=a[1]?"#"+a[1]:""):h=a;return h};function Y(a,b){la(a,"<amp-skimlinks> Invalid option => "+b)}
function ab(a,b){var c=a.getAttribute("publisher-code");Y(c,'"publisher-code" is required.');var d=[];b.canonicalUrl&&d.push(ua(b.canonicalUrl).hostname.replace(/^www\./,""));b.sourceUrl&&d.push(ua(b.sourceUrl).hostname.replace(/^www\./,""));d=bb(a,d);var e;(e=a.getAttribute("tracking"))?(Y("true"===e||"false"===e,'"tracking" possible values are "true" or "false".'),e="true"===e):e=!0;var f=a.getAttribute("custom-tracking-id");f&&Y(50>=f.length,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.');
var g=a.getAttribute("link-selector")||null,h;(h=a.getAttribute("custom-redirect-domain"))?(h=h.replace(/^\/\/|^https?:\/\/|\/$/g,""),h="http://"+h):h="https://go.skimresources.com";try{/^[\w-]+$/.test("script");if(void 0!==E)var m=E;else{try{var q=a.ownerDocument,B=q.createElement("div"),xa=q.createElement("div");B.appendChild(xa);var ya=B.querySelector(":scope div")===xa}catch(za){ya=!1}m=E=ya}if(m)var Aa=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{a.classList.add("i-amphtml-scoped");
var cb="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),db=a.querySelectorAll(cb);a.classList.remove("i-amphtml-scoped");Aa=db}var X=Aa;if(1!==X.length)throw Error("Found "+X.length+" <script> children. Expected 1.");var P=X[0];if("SCRIPT"!=P.tagName||!P.hasAttribute("type")||"APPLICATION/JSON"!=P.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var eb=JSON.parse(P.textContent)}catch(za){throw Error("Failed to parse <script> contents. Is it valid JSON?");
}a=eb;var Ba={pageTrackingUrl:a.pageTrackingUrl||L.pageTrackingUrl,linksTrackingUrl:a.linksTrackingUrl||L.linksTrackingUrl,nonAffiliateTrackingUrl:a.nonAffiliateTrackingUrl||L.nonAffiliateTrackingUrl,beaconUrl:a.beaconUrl||L.beaconUrl}}catch(za){Ba=L}return{pubcode:c,excludedDomains:d,tracking:e,customTrackingId:f,linkSelector:g,waypointBaseUrl:h,config:Ba}}
function bb(a,b){var c=[].concat(b).concat(wa),d=a.getAttribute("excluded-domains");d&&(c=c.concat(d.trim().split(/\s+/).map(function(e){return e.replace(/^www\./,"")})));return c};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.S=null;a.A=null;a.da=null;a.la=null;a.ha=null;a.h={};a.L=null;a.M=null;a.R=null;a.ja=null;a.Y=null;return a}fa(Z,AMP.BaseElement);k=Z.prototype;
k.buildCallback=function(){var a=this;this.S=v(this.win,"xhr");this.A=this.getAmpDoc();this.da=x(this.A,"documentInfo").get();this.la=x(this.A,"viewer");this.ha=new W(this.A);this.h=ab(this.element,this.da);return this.A.waitForBodyOpen().then(function(){return a.la.getReferrerUrl()}).then(function(b){a.Y=b;a.signals().signal("load-start");b=new M(a.element,a.h,a.Y);a.L=b;a.R=new $a(a.A,a.h,a.L,a.Y);a.M=new N(a.S,a.h,a.R);a.ja=fb(a)})};
k.xa=function(a){var b=this;this.L.setTrackingInfo({guid:a.guid});this.A.whenFirstVisible().then(function(){b.L.sendImpressionTracking(b.ja.getAnchorReplacementList())})};k.ta=function(){return(this.M.firstRequest||this.M.fetchDomainResolverApi([])).then(this.xa.bind(this))};
function fb(a){var b=a.ha.registerLinkRewriter("amp-skimlinks",function(e){return a.M.resolveUnknownAnchors(e)},{linkSelector:a.h.linkSelector}),c={},d=(c.PAGE_SCANNED=ia(a.ta.bind(a)),c.CLICK=a.ra.bind(a),c);b.events.add(function(e){var f=d[e.type];f&&f(e.eventData)});return b}k.ra=function(a){"amp-skimlinks"!==a.linkRewriterId&&"contextmenu"!==a.clickType&&this.L.sendNaClickTracking(a.anchor)};k.isLayoutSupported=function(){return!0};(function(a){a.registerElement("amp-skimlinks",Z)})(self.AMP);
})});

//# sourceMappingURL=amp-skimlinks-0.1.js.map
