(window.__IDL__=window.__IDL__||[]).push([[22],{159:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var o=r(0),i=r(1),s=r(94),n=r(96),a=r(97),c=function(){function t(t){this.props=t}return t.prototype.getState=function(){return(0,this.store.getState)()},t.prototype.actionResponse=function(){var t=this.props,e=t.redeem,r=t.redirectModal,o=t.redirectUrl,i=t.switchModal,s=this.getState().modal;i&&this.modalSwitch(),r&&this.modalUrl(),s.queue.step&&this.modalStep(),o&&!s.queue.step&&this.redirect(),e&&this.redeem()},t.prototype.modalStep=function(){var t=this.getState(),e=t.dispatch,r=t.modal.queue.step,o=r.key,i=r.url;e(Object(s.a)({active:{key:o,url:i}}))},t.prototype.modalUrl=function(){var t=this.store.dispatch,e=this.props.redirectModal;t(Object(n.a)({active:{url:e,reload:!0}}))},t.prototype.modalSwitch=function(){var t=this.store.dispatch,e=this.props.switchModal;t(Object(a.a)({active:{key:e,reload:!0}}))},t.prototype.redirect=function(){var t=this.window,e=this.props.redirectUrl;t.location.replace(e)},t.prototype.redeem=function(){var t=this.events,e=this.constant,r=this.props.redeem;t.publish(e.event.redemption.trigger,{data:{redeem:r}})},Object(o.c)([Object(i.b)("global.constant")],t.prototype,"constant",void 0),Object(o.c)([Object(i.b)("global.events")],t.prototype,"events",void 0),Object(o.c)([Object(i.b)("global.window")],t.prototype,"window",void 0),Object(o.c)([Object(i.b)("global.store")],t.prototype,"store",void 0),t}()},72:function(t,e,r){"use strict";r.r(e),r.d(e,"NewsletterSignup",(function(){return c}));var o=r(0),i=r(2),s=r(1),n=r(90),a=r(159),c=function(t){function e(e){var r=t.call(this,e)||this;return r.onSubmitForm=function(t){return Object(o.b)(r,void 0,void 0,(function(){var e,r,i,s;return Object(o.e)(this,(function(o){switch(o.label){case 0:e=this.props.signupModal,r=this.state.emailValue,t.preventDefault(),this.setState({signupError:!1}),(i=new n.a({method:"POST",encode:!1,json:!1,url:"/authenticate/register",data:{email:r},responseHandler:!0})).headers({"Content-Type":"application/json; charset=UTF-8"}),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.send()];case 2:return s=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return!s||s.Errors?(this.setState({signupError:!0}),[2]):(new a.a({redirectModal:e}).actionResponse(),[2])}}))}))},r.onKeyUpInput=function(t){var e=t.target.value;r.setState({emailValue:e})},r.state={signupError:!1,emailValue:""},r}return Object(o.d)(e,t),e.prototype.render=function(){var t=this.resource,e=this.props,r=e.showTerms,o=void 0===r||r,s=e.redemptionCount,n=e.tooltipContent,a=this.state,c=a.emailValue,l=a.signupError?"error":"";return Object(i.h)("form",{class:"form form-tilesignup "+l,onSubmit:this.onSubmitForm},Object(i.h)("div",{class:"form-tilesignup-inner"},Object(i.h)("div",{class:"form-row form-tilesignup-details"},Object(i.h)("label",{for:"tilesignup-email",class:"sr-only"},t.newsletter.email),Object(i.h)("input",{id:"tilesignup-email",type:"email",class:"input form-tilesignup-input",name:"Email",value:c,onKeyUp:this.onKeyUpInput,placeholder:t.newsletter.email})),Object(i.h)("div",{class:"form-row form-tilesignup-submit"},Object(i.h)("button",{type:"submit","aria-label":t.newsletter.signup,class:"button"},t.newsletter.signup),s>0&&Object(i.h)("span",{class:"form-tilesignup-tooltip"},n))),o&&Object(i.h)("div",{class:"form-row form-tilesignup-terms",dangerouslySetInnerHTML:{__html:t.loginRegister.termsPrivacyCopy}}))},Object(o.c)([Object(s.b)("global.resource")],e.prototype,"resource",void 0),e}(i.Component)}}]);