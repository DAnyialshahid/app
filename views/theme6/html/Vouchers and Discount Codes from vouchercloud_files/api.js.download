(function(n){function e(n){var i;switch(t.privacy.law.toLowerCase()){case"gdpr":t.privacy.gdpr.Consent&&(i=new Image(1,1),i.src=n);break;case"ccpa":t.privacy.ccpa.Consent&&(i=new Image(1,1),i.src=n);break;case"na":i=new Image(1,1);i.src=n}}function o(n){return function(){t.privacy=t.privacy||{};t.privacy.que=t.privacy.que||[];t.privacy.que.push(function(){e(n)})}}function s(n,t){var r=i.site.parentId;return t!==undefined&&t===!0&&(r=i.site.id),"src="+r+"&ccsid="+i.session.id+"&ccuid="+i.user.id+"&ccpt=-1&puid="+n}function h(n){var f=n;this.syncUserIdentity=function(n,t){i!==null&&n!==undefined&&o(r()+s(n,t))()};this.getUserId=function(){return f};this.recordEvent=function(n){if(n&&n.length>0){var i=u();t.sendMessage("custom-ce-"+n,i)}};this.ready=!0}var t=n.cca,i=null,r,u,f;n.carbonReady=n.carbonReady||[];t.privacy=t.privacy||{que:[]};r=function(){return t.settings.site.api+"/sync/user?"};u=function(n){var i=[],r,u;if(i.push(["parentId",encodeURIComponent(t.settings.site.parentId)]),i.push(["scriptId",encodeURIComponent(t.settings.site.scriptId)]),i.push(["triggerId","6832865d-3a8b-4bc0-80f8-a9b174e8afe3"]),i.push(["triggerLabel","client-event"]),i.push(["eventTarget",""]),r=[],n)for(u in Object.keys(n))r.push([u+"="+n[u]]);return i.push(["customAttributes",r.join(";")]),i};f=function(){var i,t;if(n.carbonReady!==null)for(i=n.carbonReady.length,t=0;t<i;t++)n.carbonReady[t]();n.carbonReady={push:function(n){typeof n=="function"&&n()}}};t.getSettings(function(r){i=r;var u=new h(r.user.id);t.api=Object.assign(t.api,u);n.carbonApi=t.api;n.carbon=n.carbonApi;f();t.api.dispatchEvent("apiReady")})})(window,document)